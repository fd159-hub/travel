<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>æ—¥æœ¬æ±äº¬è¡Œç¨‹å°è¦½ï¼ˆ2026/1/10â€“1/14ï¼‰</title>
  <style>

    :root{
      --bg:#fafafa; --card:#ffffff; --text:#111111; --muted:#666666;
      --border:#dddddd; --accent:#2563eb; --accent2:#0ea5e9;
      --chip:#f3f4f6; --shadow:0 6px 18px rgba(0,0,0,.08);
      --radius:16px; --pad:14px; --base:16px;
      --font: system-ui, -apple-system, "Segoe UI", Arial, "PingFang TC", "Noto Sans TC", sans-serif;

      /* iOS-like surfaces */
      --headerbg: rgba(250,250,250,.86);
      --btnbg: #ffffff;
      --btnbg2:#f3f4f6;
      --accentbg: rgba(37,99,235,.12);
      --accentring: rgba(37,99,235,.18);
      --accentline: rgba(37,99,235,.45);
      --linkbg: rgba(37,99,235,.10);
      --itembg: #fbfbfc;
      --blockbg: #ffffff;
    }
    [data-theme="dark"]{
      --bg:#0b0f14; --card:#111827; --text:#e5e7eb; --muted:#9ca3af;
      --border:#243244; --chip:#0f172a; --shadow:0 10px 24px rgba(0,0,0,.35);
      --accent:#60a5fa; --accent2:#38bdf8;

      --headerbg: rgba(11,15,20,.80);
      --btnbg: #111827;
      --btnbg2:#0f172a;
      --accentbg: rgba(96,165,250,.14);
      --accentring: rgba(96,165,250,.18);
      --accentline: rgba(96,165,250,.55);
      --linkbg: rgba(96,165,250,.12);
      --itembg: rgba(255,255,255,.03);
      --blockbg: rgba(255,255,255,.03);
    }
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:var(--font); font-size:var(--base);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .wrap{max-width:1000px;margin:0 auto;padding:14px 14px 110px}
    header{
      position:sticky; top:0; z-index:20;
      background:var(--headerbg);
      border-bottom:1px solid var(--border);
      backdrop-filter:saturate(1.2) blur(10px);
    }
    .head-inner{max-width:1000px;margin:0 auto;padding:12px 14px}
    h1{margin:0 0 6px;font-size:20px;line-height:1.25}
    .sub{color:var(--muted);font-size:13px;line-height:1.4}

    /* ===== iOS-like controls ===== */
    .toolbar{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin-top:10px;
    }

    .btn, .chip, input, select{
      -webkit-appearance:none;
      appearance:none;
      height:44px;
      padding:0 14px;
      border-radius:999px;
      font-size:15px;
      line-height:44px;
      border:1px solid rgba(0,0,0,.10);
      background:var(--btnbg);
      color:var(--text);
      box-shadow:0 1px 0 rgba(0,0,0,.02);
    }
    [data-theme="dark"] .btn,
    [data-theme="dark"] .chip,
    [data-theme="dark"] input,
    [data-theme="dark"] select{
      border-color: rgba(255,255,255,.10);
    }

    .btn{
      cursor:pointer;
      font-weight:800;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      text-decoration:none;
      white-space:nowrap;
    }
    .btn:active{transform:scale(.98); filter:brightness(.98);}

    .btn.primary{
      border-color: var(--accentline);
      background: var(--accentbg);
      font-weight:900;
    }

    .chip{
      background:var(--btnbg2);
      font-weight:900;
    }

    .mini{
      height:36px !important;
      line-height:36px !important;
      padding:0 12px !important;
      font-size:13px !important;
      gap:6px !important;
    }

    /* ä¸‹æ‹‰ç®­é ­ï¼ˆä¸ä¾è³´ color-mixï¼‰ */
    select{
      padding-right:36px;
      background-image:
        linear-gradient(45deg, transparent 50%, rgba(0,0,0,.45) 50%),
        linear-gradient(135deg, rgba(0,0,0,.45) 50%, transparent 50%);
      background-position:
        calc(100% - 18px) 19px,
        calc(100% - 12px) 19px;
      background-size:6px 6px, 6px 6px;
      background-repeat:no-repeat;
    }
    [data-theme="dark"] select{
      background-image:
        linear-gradient(45deg, transparent 50%, rgba(255,255,255,.55) 50%),
        linear-gradient(135deg, rgba(255,255,255,.55) 50%, transparent 50%);
    }

    /* iOS Search Bar */
    input[type="search"]{
      flex:1 1 260px;
      min-width:220px;
      max-width:100%;
      padding:0 14px 0 40px;
      border-radius:16px;
      line-height:44px;
      height:44px;
      background:var(--btnbg2);
      outline:none;
      background-image:
        radial-gradient(circle at 18px 22px, rgba(0,0,0,.35) 0 6px, transparent 7px),
        linear-gradient(45deg, rgba(0,0,0,.35) 0 2px, transparent 0);
      background-size: 24px 44px, 10px 10px;
      background-position: 6px 0, 28px 30px;
      background-repeat:no-repeat;
    }
    [data-theme="dark"] input[type="search"]{
      background-image:
        radial-gradient(circle at 18px 22px, rgba(255,255,255,.45) 0 6px, transparent 7px),
        linear-gradient(45deg, rgba(255,255,255,.45) 0 2px, transparent 0);
    }
    input[type="search"]:focus{
      box-shadow:0 0 0 4px var(--accentring);
      border-color: var(--accentline);
      background: var(--btnbg);
    }
    input[type="search"]::-webkit-search-cancel-button{-webkit-appearance:auto;}
    #btnClear{flex:0 0 auto;}

    /* Tabs */
    .tabs{display:flex; gap:8px; overflow:auto; padding:10px 0 4px; scrollbar-width:none}
    .tabs::-webkit-scrollbar{display:none}
    .tab{
      flex:0 0 auto; cursor:pointer; user-select:none;
      padding:10px 12px; border-radius:999px; border:1px solid var(--border);
      background:var(--card); font-weight:900; font-size:14px;
      -webkit-tap-highlight-color: transparent;
    }
    .tab.active{border-color:var(--accent); box-shadow:0 0 0 3px var(--accentring)}

    .panel{display:none; margin-top:12px}
    .panel.active{display:block}
    .day-card{
      background:var(--card); border:1px solid var(--border);
      border-radius:var(--radius); box-shadow:var(--shadow);
      padding:var(--pad); margin:12px 0;
    }
    .day-title{display:flex; gap:10px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap; margin-bottom:10px;}
    .day-title h2{margin:0; font-size:18px}
    .note{color:var(--muted); font-size:13px; line-height:1.55}
    .hero{border:1px solid var(--border); border-radius:14px; overflow:hidden; background:var(--btnbg2); margin:12px 0;}
    .hero .cap{padding:10px 12px; border-top:1px solid var(--border); color:var(--muted); font-size:13px; line-height:1.5;}
    .items{margin-top:10px; display:flex; flex-direction:column; gap:10px}
    details.item{background:var(--itembg); border:1px solid var(--border); border-radius:14px; padding:10px 12px;}
    details.item.nav-current{border-color:var(--accent); box-shadow:0 0 0 3px var(--accentring);}
    summary{list-style:none; cursor:pointer; display:flex; gap:10px; align-items:flex-start; justify-content:space-between; -webkit-tap-highlight-color: transparent;}
    summary::-webkit-details-marker{display:none}
    .left{min-width:0; display:flex; gap:10px; align-items:flex-start;}
    .time{
      flex:0 0 auto;
      font-weight:900; color:var(--accent);
      font-variant-numeric:tabular-nums;
      padding:3px 8px; border-radius:999px; background:rgba(37,99,235,.10);
      border:1px dashed rgba(37,99,235,.35);
      font-size:13px; line-height:1.2; margin-top:2px;
    }
    [data-theme="dark"] .time{
      background:rgba(96,165,250,.12);
      border-color:rgba(96,165,250,.45);
    }
    .title{font-weight:900; line-height:1.35; word-break:break-word;}
    .meta{color:var(--muted); font-size:12.5px; margin-top:2px}
    .right{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end}
    .content{margin-top:10px; padding-top:10px; border-top:1px dashed var(--border); display:flex; flex-direction:column; gap:8px}
    .block{background:var(--blockbg); border:1px solid var(--border); border-radius:12px; padding:10px 12px;}
    .block h3{margin:0 0 6px; font-size:13px; color:var(--muted); letter-spacing:.02em}
    .block p{margin:0; line-height:1.6}
    .links{display:flex; gap:8px; flex-wrap:wrap}

    /* âœ… åœ°åœ–/é€£çµæŒ‰éˆ•ï¼šå»é™¤æ¡†ç·š */
    a.linkbtn{
      text-decoration:none; display:inline-flex; align-items:center; gap:6px;
      border:0; border-radius:999px;
      padding:8px 10px;
      background:var(--linkbg);
      color:var(--text); font-size:13px; font-weight:900;
      -webkit-tap-highlight-color: transparent;
      white-space:nowrap;
    }
    a.linkbtn.mini{font-size:12.5px; padding:7px 10px;}

    .toast{
      position:fixed; top:14px; right:14px; z-index:50;
      background:var(--card); border:1px solid var(--border);
      border-radius:14px; box-shadow:var(--shadow);
      padding:10px 12px; font-size:13px; color:var(--text);
      display:none;
      max-width:min(360px, calc(100vw - 28px));
    }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:var(--chip);
      font-size:12.5px;
      font-weight:900;
    }
    .row{display:flex; flex-wrap:wrap; gap:10px; align-items:center;}
    .spacer{flex:1}
    .hint{color:var(--muted); font-size:12.5px}
    mark{background: rgba(14,165,233,.18); color:inherit; padding:0 2px; border-radius:4px}

    /* å°èˆªæ¨¡å¼åº•éƒ¨åˆ— */
    .navBar{
      position:fixed; left:0; right:0; bottom:0; z-index:40;
      border-top:1px solid var(--border);
      background:var(--headerbg);
      backdrop-filter:saturate(1.2) blur(10px);
    }
    .navInner{
      max-width:1000px; margin:0 auto; padding:10px 14px;
      display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:space-between;
    }
    .navInfo{color:var(--muted); font-size:12.5px; line-height:1.4; min-width:220px}
    .navGroup{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    .hidden{display:none}

    /* âœ… å°èˆªæ¨¡å¼åªé¡¯ç¤ºç•¶å¤©ï¼šéš±è— tabs */
    body.nav-mode .tabs{display:none}

  </style>
</head>
<body>
<header>
  <div class="head-inner">
    <h1>æ—¥æœ¬æ±äº¬è¡Œç¨‹å°è¦½ï¼ˆé›¢ç·šç‰ˆï¼‰</h1>
    <div class="sub">
      âœ… é›¢ç·šå°è¦½ï½œğŸ—ºï¸ åœ°åœ–ï¼šGoogle Maps<br>
      ğŸ§­ å°èˆªï¼šä¸Šä¸€/ä¸‹ä¸€ï½œâ±ï¸ æ’åºï¼‹æ™‚æ®µæ¿¾é¡
    </div>

    <div class="toolbar">
      <button class="btn" id="toggleTheme">ğŸŒ™ å¤œé–“æ¨¡å¼</button>
      <span class="chip">å­—ç´š</span>
      <button class="btn" id="fontMinus">Aâˆ’</button>
      <button class="btn" id="fontPlus">A+</button>

      <span class="chip">å¿«é€Ÿ</span>
      <button class="btn primary" id="btnToday">ğŸ“ ä»Šæ—¥è¡Œç¨‹</button>
      <button class="btn primary" id="btnNavToggle">ğŸ§­ å°èˆªï¼šé—œ</button>

      <span class="chip">æ™‚é–“</span>
      <select id="sortSel" aria-label="æ’åº">
        <option value="original" selected>åŸé †åº</option>
        <option value="time">ä¾æ™‚é–“æ’åº</option>
      </select>
      <select id="slotSel" aria-label="æ™‚æ®µæ¿¾é¡">
        <option value="all" selected>å…¨éƒ¨æ™‚æ®µ</option>
        <option value="morning">ä¸Šåˆ</option>
        <option value="afternoon">ä¸‹åˆ</option>
        <option value="evening">æ™šä¸Š</option>
        <option value="unknown">ç„¡æ˜ç¢ºæ™‚é–“</option>
      </select>

      <span class="spacer"></span>
      <input id="searchBox" type="search" placeholder="æœå°‹ï¼šåœ°é» / é¤å»³ / é—œéµå­—" />
      <button class="btn" id="btnClear">æ¸…é™¤</button>
    </div>

    <div class="tabs" id="tabs"></div>
  </div>
</header>

<div class="wrap" id="panels"></div>

<!-- å°èˆªæ¨¡å¼åº•éƒ¨åˆ— -->
<div class="navBar hidden" id="navBar">
  <div class="navInner">
    <div class="navInfo" id="navInfo">å°èˆªæ¨¡å¼å·²é–‹å•Ÿã€‚</div>
    <div class="navGroup">
      <button class="btn" id="btnPrev">â¬…ï¸ ä¸Šä¸€å€‹</button>
      <button class="btn primary" id="btnNext">ä¸‹ä¸€å€‹ â¡ï¸</button>
      <button class="btn" id="btnExitNav">é€€å‡ºå°èˆª</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
/** ========= å°å·¥å…· ========= */
const $tabs = document.getElementById('tabs');
const $panels = document.getElementById('panels');
const $toast = document.getElementById('toast');
const $searchBox = document.getElementById('searchBox');
const $sortSel = document.getElementById('sortSel');
const $slotSel = document.getElementById('slotSel');

function toast(msg){
  $toast.textContent = msg;
  $toast.style.display = 'block';
  clearTimeout(toast._t);
  toast._t = setTimeout(()=> $toast.style.display='none', 1800);
}
function escapeHTML(s){
  return (s||"").replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
}
function encodeQ(s){ return encodeURIComponent((s||"").trim()); }
function mapsSearchLink(query){
  const q = encodeQ(query);
  return `https://www.google.com/maps/search/?api=1&query=${q}`;
}
function escapeRegExpStr(s){
  s = String(s||"");
  var pairs = [
    ["\\","\\\\"],
    [".","\\."],
    ["*","\\*"],
    ["+","\\+"],
    ["?","\\?"],
    ["^","\\^"],
    ["$","\\$"],
    ["{","\\{"],
    ["}","\\}"],
    ["(","\\("],
    [")","\\)"],
    ["|","\\|"],
    ["[","\\["],
    ["]","\\]"]
  ];
  for(var i=0;i<pairs.length;i++){
    var a = pairs[i][0], b = pairs[i][1];
    s = s.split(a).join(b);
  }
  return s;
}
function maybeHighlight(text, keyword){
  if(!keyword) return escapeHTML(text);
  var esc = escapeHTML(text);
  var k = escapeRegExpStr(keyword);
  try{ return esc.replace(new RegExp(k, 'gi'), function(m){ return '<mark>'+m+'</mark>'; }); }
  catch(e){ return esc; }
}
function typeIcon(type){
  const t = (type||"").toLowerCase();
  if(t.includes("äº¤é€š") || t.includes("èˆªç­")) return "ğŸš†";
  if(t.includes("ä½å®¿")) return "ğŸ¨";
  if(t.includes("é¤") || t.includes("ç”œé»") || t.includes("å°åƒ")) return "ğŸœ";
  if(t.includes("æ™¯é»") || t.includes("æ‹ç…§")) return "ğŸ“¸";
  if(t.includes("é€›")) return "ğŸ›ï¸";
  if(t.includes("é›†åˆ")) return "ğŸ§­";
  if(t.includes("é«”é©—")) return "ğŸŸï¸";
  if(t.includes("æ¡è²·") || t.includes("ä¼´æ‰‹ç¦®")) return "ğŸ";
  if(t.includes("ä¸€æ—¥éŠ")) return "ğŸ—»";
  return "ğŸ“";
}

/** ========= æ™‚é–“è§£æ / æ™‚æ®µæ¿¾é¡ ========= */
function parseTimeToMinutes(timeStr){
  const s = (timeStr||"").toLowerCase();
  const m = s.match(/(\d{1,2})\s*[:ï¼š]\s*(\d{2})/);
  if(m){
    const hh = Math.max(0, Math.min(23, parseInt(m[1],10)));
    const mm = Math.max(0, Math.min(59, parseInt(m[2],10)));
    return hh*60 + mm;
  }
  if(s.includes("æ—©é¤")) return 8*60;
  if(s.includes("åˆé¤")) return 12*60;
  if(s.includes("æ™šé¤")) return 18*60;
  return null;
}
function timeSlot(timeStr){
  const mins = parseTimeToMinutes(timeStr);
  if(mins == null) return "unknown";
  const hh = Math.floor(mins/60);
  if(hh >= 5 && hh <= 11) return "morning";
  if(hh >= 12 && hh <= 16) return "afternoon";
  return "evening";
}

/** ========= å…§å»º SVG åœ–ç‰‡ï¼ˆé›¢ç·šå¯é¡¯ç¤ºï¼‰ ========= */
function heroSVG(kind){
  const common = `
    <svg viewBox="0 0 1200 360" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="è¡Œç¨‹åœ–ç‰‡">
      <defs>
        <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
          <stop offset="0" stop-color="rgba(37,99,235,0.18)"/>
          <stop offset="1" stop-color="rgba(14,165,233,0.10)"/>
        </linearGradient>
        <linearGradient id="g2" x1="0" x2="0" y1="0" y2="1">
          <stop offset="0" stop-color="rgba(255,255,255,0.55)"/>
          <stop offset="1" stop-color="rgba(255,255,255,0.0)"/>
        </linearGradient>
      </defs>
      <rect x="0" y="0" width="1200" height="360" fill="url(#g1)"/>
      <rect x="0" y="0" width="1200" height="120" fill="url(#g2)"/>
  `;
  const end = `</svg>`;
  if(kind==="arrival"){
    return common + `
      <path d="M190 140 l140 35 260 -80 40 12 -210 95 120 30 -10 25 -155 -40 -70 30 32 55 -25 10 -45 -55 -62 25 -20 -5 60 -38 -145 -44 z"
            fill="rgba(17,24,39,0.35)"/>
      <rect x="0" y="270" width="1200" height="90" fill="rgba(17,24,39,0.10)"/>
      <g fill="rgba(17,24,39,0.18)">
        <rect x="70" y="210" width="60" height="150"/><rect x="150" y="235" width="50" height="125"/>
        <rect x="220" y="195" width="80" height="165"/><rect x="320" y="240" width="50" height="120"/>
        <rect x="400" y="180" width="90" height="180"/><rect x="510" y="220" width="60" height="140"/>
        <rect x="600" y="200" width="70" height="160"/><rect x="690" y="230" width="55" height="130"/>
        <rect x="770" y="190" width="85" height="170"/><rect x="870" y="240" width="55" height="120"/>
        <rect x="940" y="210" width="70" height="150"/><rect x="1030" y="230" width="55" height="130"/>
      </g>
      <circle cx="1020" cy="150" r="40" fill="rgba(14,165,233,0.22)"/>
      <circle cx="1006" cy="142" r="5" fill="rgba(17,24,39,0.35)"/>
      <circle cx="1034" cy="142" r="5" fill="rgba(17,24,39,0.35)"/>
      <path d="M1010 162 q10 10 20 0" stroke="rgba(17,24,39,0.35)" stroke-width="4" fill="none" stroke-linecap="round"/>
    ` + end;
  }
  if(kind==="asakusa"){
    return common + `
      <rect x="230" y="120" width="40" height="170" rx="8" fill="rgba(239,68,68,0.25)"/>
      <rect x="470" y="120" width="40" height="170" rx="8" fill="rgba(239,68,68,0.25)"/>
      <rect x="200" y="110" width="340" height="38" rx="12" fill="rgba(239,68,68,0.22)"/>
      <rect x="220" y="160" width="300" height="20" rx="10" fill="rgba(239,68,68,0.18)"/>
      <path d="M860 80 l60 0 20 40 -40 0 30 180 -120 0 30 -180 -40 0 20 -40 z"
            fill="rgba(245,158,11,0.20)"/>
      <rect x="0" y="285" width="1200" height="75" fill="rgba(17,24,39,0.08)"/>
    ` + end;
  }
  if(kind==="harajuku"){
    return common + `
      <g fill="rgba(14,165,233,0.18)">
        <rect x="160" y="110" width="180" height="120" rx="18"/>
        <rect x="360" y="140" width="220" height="140" rx="18" fill="rgba(37,99,235,0.16)"/>
        <rect x="610" y="120" width="180" height="160" rx="18" fill="rgba(168,85,247,0.12)"/>
      </g>
      <path d="M950 140 c-20-25-60-5-55 25 5 30 55 55 55 55s50-25 55-55c5-30-35-50-55-25z"
            fill="rgba(239,68,68,0.18)"/>
      <rect x="0" y="285" width="1200" height="75" fill="rgba(17,24,39,0.07)"/>
    ` + end;
  }
  if(kind==="fuji"){
    return common + `
      <path d="M280 280 L470 110 L660 280 Z" fill="rgba(17,24,39,0.16)"/>
      <path d="M470 110 L520 170 L420 170 Z" fill="rgba(255,255,255,0.50)"/>
      <path d="M0 290 Q300 250 600 290 T1200 290 L1200 360 L0 360 Z" fill="rgba(14,165,233,0.12)"/>
      <g fill="rgba(17,24,39,0.10)">
        <rect x="820" y="220" width="70" height="70" rx="8"/>
        <path d="M820 220 L855 190 L890 220 Z" fill="rgba(17,24,39,0.12)"/>
        <rect x="910" y="235" width="60" height="55" rx="8"/>
        <path d="M910 235 L940 210 L970 235 Z" fill="rgba(17,24,39,0.12)"/>
      </g>
    ` + end;
  }
  return common + `
    <path d="M250 210 h520" stroke="rgba(17,24,39,0.18)" stroke-width="10" stroke-linecap="round"/>
    <path d="M760 210 l-30 -24 v48 z" fill="rgba(17,24,39,0.18)"/>
    <circle cx="180" cy="210" r="55" fill="rgba(37,99,235,0.18)"/>
    <text x="180" y="220" text-anchor="middle" font-size="34" fill="rgba(17,24,39,0.35)" font-family="system-ui">âœˆï¸</text>
    <rect x="0" y="285" width="1200" height="75" fill="rgba(17,24,39,0.07)"/>
  ` + end;
}

/** ========= è¡Œç¨‹è³‡æ–™ ========= */
const itinerary = [
  {
    key:"2026-01-10",
    label:"1/10ï¼ˆå…­ï¼‰å…¥å¢ƒãƒ»æ–°å®¿",
    dateText:"2026/1/10ï¼ˆå…­ï¼‰",
    heroKind:"arrival",
    dayIntro:"ä»Šå¤©å¾æ¡ƒåœ’å‡ºç™¼æŠµé”æ±äº¬æˆç”°ï¼Œæ­ä¹˜ N'EX å‰å¾€æ–°å®¿ï¼Œæ™šä¸Šæ•£æ­¥æ­Œèˆä¼ç”ºã€çœ‹ 3D å·¨å¤§èŠ±è²“èˆ‡å“¥å‰æ‹‰ï¼Œç†Ÿæ‚‰å‘¨é‚Šå‹•ç·šï¼Œç‚ºæ˜å¤©è¡Œç¨‹æš–èº«ã€‚",
    items:[
      { time:"å°ç£10:40", title:"æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆï½œå‡ºç™¼", type:"äº¤é€š", place:"æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ",
        guide:"å„ä½æ—…å®¢æˆ‘å€‘å³å°‡å¾æ¡ƒåœ’å‡ºç™¼ã€‚è«‹ç¢ºèªè­·ç…§ã€æ©Ÿç¥¨èˆ‡éš¨èº«è¡Œæéƒ½åœ¨èº«é‚Šï¼›éå®‰æª¢å¾Œå¯å†è£œè²·é£²æ°´æˆ–å°é»å¿ƒã€‚"
      },
      { time:"æ—¥æœ¬14:55", title:"æ±äº¬æˆç”°æ©Ÿå ´ ç¬¬ä¸€èˆªå»ˆï½œæŠµé”", type:"äº¤é€š", place:"æˆç”°åœ‹éš›æ©Ÿå ´ ç¬¬ä¸€èˆªå»ˆ",
        guide:"æ­¡è¿æŠµé”æ±äº¬æˆç”°æ©Ÿå ´ã€‚ä¸‹æ©Ÿå¾Œä¾æŒ‡æ¨™å‰å¾€å…¥å¢ƒå¯©æŸ¥ã€è¡Œææé ˜ï¼Œå®Œæˆå¾Œå†å‡ºé—œã€‚æ¥ä¸‹ä¾†æˆ‘å€‘è¦è²· N'EX è»Šç¥¨å‰å¾€æ–°å®¿ã€‚"
      },
      { time:"16:00", title:"å‡ºé—œ", type:"æµç¨‹", place:"æˆç”°æ©Ÿå ´ å‡ºé—œ",
        guide:"å‡ºé—œå¾Œå…ˆé›†åˆé»åï¼Œç¢ºèªæ¯ä½æˆå“¡éƒ½æ‹¿åˆ°è¡Œæèˆ‡éš¨èº«ç‰©å“ï¼Œå†å‰å¾€ JR å”®ç¥¨æ©Ÿè³¼è²· N'EX ä¾†å›ç¥¨ã€‚"
      },
      { time:"â€”", title:"JR å”®ç¥¨æ©Ÿï½œè²· N'EX æ±äº¬å»å›è»Šç¥¨ï¼ˆæº–å‚™è­·ç…§ï¼‰", type:"äº¤é€š", place:"æˆç”°æ©Ÿå ´ JR å”®ç¥¨æ©Ÿ Narita Express",
        guide:"å”®ç¥¨æ™‚æœƒéœ€è¦è­·ç…§è³‡è¨Šã€‚è²·å¥½å¾Œè«‹æŠŠè»Šç¥¨èˆ‡æ”¶æ“šåˆ†é–‹æ”¶å¥½ï¼Œé€²ç«™å‰å†ä¸€èµ·æ ¸å°è»Šæ¬¡èˆ‡æœˆå°ã€‚"
      },
      { time:"ç´„16:19â†’", title:"æ­ N'EX åˆ°æ–°å®¿ï¼ˆNarita Expressï¼‰", type:"äº¤é€š", place:"Narita Express æ–°å®¿",
        detail:"NEX åœé çš„ 5ã€6 è™Ÿæœˆå°ä½æ–¼è¼ƒå—éƒ¨ä½ç½®ã€‚è«‹éµå¾ªã€Œå—å£/æ–°å—å£ã€æŒ‡æ¨™ï¼Œé¿å…åœ¨åœ°ä¸‹é“è¿·è·¯ã€‚",
        guide:"åˆ°æ–°å®¿ç«™å¾Œè»Šç«™å¾ˆå¤§ï¼Œè«‹è·Ÿè‘—ã€Œå—å£ï¼æ–°å—å£ã€æ–¹å‘èµ°ï¼Œé¿å…åœ¨åœ°ä¸‹é“è¿·è·¯ã€‚å¤§å®¶å…ˆåˆ°é›†åˆé»å†åˆ†é–‹è¡Œå‹•ã€‚"
      },
      { time:"18:30â€“18:45", title:"è¨ˆç¨‹è»Š/Uber åˆ°é£¯åº—æ”¾è¡Œæï¼ˆç´„2kmï¼‰", type:"äº¤é€š", place:"ç›¸éµFRESA INN æ±æ–°å®¿ç«™å‰",
        detail:"æ—¥æœ¬è¨ˆç¨‹è»Šå¾Œåº§ç‚ºè‡ªå‹•é–€ï¼Œç”±å¸æ©Ÿæ§åˆ¶ã€‚",
        guide:"æŠµé”å¾Œå…ˆæ”¾è¡Œæã€ç¢ºèªæˆ¿é–“èˆ‡å‚™å“ã€‚æé†’ï¼šæ—¥æœ¬è¨ˆç¨‹è»Šå¾Œåº§æ˜¯è‡ªå‹•é–€ï¼Œè«‹ç­‰å¸æ©Ÿé–‹é–€å†ä¸Šè»Šã€‚"
      },
      { time:"â€”", title:"é£¯åº—ï¼šç›¸éµFRESA INN æ±æ–°å®¿ç«™å‰", type:"ä½å®¿", place:"ç›¸éµFRESA INN æ±æ–°å®¿ç«™å‰",
        guide:"ä»Šæ™šä½å®¿åœ¨æ±æ–°å®¿ç«™å‰ã€‚å…ˆç†Ÿæ‚‰æœ€è¿‘çš„ä¾¿åˆ©å•†åº—èˆ‡è»Šç«™å…¥å£ï¼Œæ˜å¤©ç§»å‹•æœƒæ›´é †ã€‚"
      },
      { time:"19:00", title:"æ™šé¤ï¼šé£¯åº—é™„è¿‘åƒ", type:"é¤é£²", place:"æ±æ–°å®¿ é¤å»³",
        guide:"ä»Šæ™šä»¥ä¾¿åˆ©èˆ‡è£œèƒ½é‡ç‚ºä¸»ï¼Œé£¯åº—é™„è¿‘ç°¡å–®ç”¨é¤å³å¯ã€‚"
      },
      { time:"â€”", title:"Bic Cameraï¼ˆæ–°å®¿ï¼‰", type:"é€›è¡—", place:"Bic Camera æ–°å®¿",
        guide:"é€›é›»å™¨èˆ‡ç”Ÿæ´»ç”¨å“ã€‚æƒ³è²·è¡Œå‹•é›»æºæˆ–è½‰æ¥é ­å¯å…ˆæ¯”åƒ¹ã€è¨˜ä¸‹å‹è™Ÿã€‚"
      },
      { time:"â€”", title:"3D å·¨å¤§èŠ±è²“ï¼ˆæ–°å®¿ï¼‰", type:"æ™¯é»", place:"Shinjuku 3D cat",
        guide:"ç«™åœ¨è¦–è§’è¼ƒæ­£çš„ä½ç½®æ‹ç…§ï¼Œç­‰å‹•ç•«å‡ºç¾æ™‚é€£æ‹å¹¾å¼µï¼Œæ•ˆæœæœ€å¥½ã€‚"
      },
      { time:"â€”", title:"æ­Œèˆä¼ç”ºä¸€ç•ªè¡—æ‹›ç‰Œ", type:"æ™¯é»", place:"æ­Œèˆä¼ç”ºä¸€ç•ªè¡—",
        guide:"æ‹ç…§æ³¨æ„äººè»Šå¾€ä¾†ï¼Œæ™šé–“è¡Œèµ°ä¿æŒçµä¼´ï¼Œé›†åˆæ™‚é–“èˆ‡åœ°é»å…ˆèªªå¥½ã€‚"
      },
      { time:"â€”", title:"å“¥å‰æ‹‰ï¼ˆæ–°å®¿æ±å¯¶å¤§æ¨“ï¼‰", type:"æ™¯é»", place:"Godzilla Head Shinjuku",
        guide:"å¯ä»¥ç”¨å»£è§’æŠŠå‘¨é‚Šéœ“è™¹ç‡ˆä¸€èµ·æ”¶é€²ä¾†ï¼Œç•«é¢æ›´æœ‰æ°£å‹¢ã€‚"
      },
      { time:"â€”", title:"é›†åˆé»ç¢ºèªï¼šæ–°å®¿ i-Land Tower LOVE æ¨™èªŒå‰", type:"é›†åˆé»", place:"Shinjuku i-Land Tower LOVE",
        guide:"é€™æ˜¯æ˜å¤©å¯Œå£«å±±ä¸€æ—¥éŠçš„é›†åˆé»ã€‚ä»Šæ™šå…ˆæŠŠè·¯ç·šèˆ‡å‡ºå£è¨˜æ¸…æ¥šï¼Œæ˜å¤©æ—©ä¸Šå°±ä¸æ…Œä¸å¿™ã€‚"
      }
    ]
  },
  {
    key:"2026-01-11",
    label:"1/11ï¼ˆæ—¥ï¼‰æ·ºè‰ãƒ»ä¸Šé‡ãƒ»ç§‹è‘‰åŸãƒ»æ±äº¬éµå¡”",
    dateText:"2026/1/11ï¼ˆæ—¥ï¼‰",
    heroKind:"asakusa",
    dayIntro:"ç¶“å…¸æ±äº¬è·¯ç·šï¼šæ·ºè‰å¯ºåƒå°é»ã€ä¸Šé‡åƒèŸ¹é“æ¨‚ï¼Œå†åˆ°ç§‹è‘‰åŸé€›é›»å™¨èˆ‡å‹•æ¼«å‘¨é‚Šï¼Œå‚æ™šå‰å¾€æ±äº¬éµå¡”æ‹ç…§é»ã€‚",
    items:[
      { time:"â€”", title:"å…Œæ›åœ°éµä¸€æ—¥åˆ¸ï¼ˆæ±æ–°å®¿ç«™å…§ï¼‰", type:"äº¤é€š", place:"æ±æ–°å®¿ç«™",
        extraLinks:[{label:"ğŸ« Klook ä¸€æ—¥åˆ¸è³‡è¨Š", url:"https://www.klook.com/zh-TW/activity/1552-subway-ticket-tokyo/"}],
        guide:"å…ˆè™•ç†åœ°éµä¸€æ—¥åˆ¸ï¼Œä»Šå¤©ç§»å‹•é»å¤šï¼Œä¸€æ—¥åˆ¸æœƒå¾ˆçœäº‹ã€‚"
      },
      { time:"æ—©é¤", title:"é£¯åº—é™„è¿‘ç°¡å–®åƒï¼ˆæ·ºè‰å†è£œï¼‰", type:"é¤é£²", place:"æ±æ–°å®¿ æ—©é¤",
        guide:"æ—©é¤å…ˆç°¡å–®åƒä¸€é»ï¼Œç•™è‚šå­åˆ°æ·ºè‰å†å“åšé»å¿ƒã€‚"
      },
      { time:"08:50â€“09:30", title:"æ·ºè‰å¯º", type:"æ™¯é»", place:"æ·ºè‰å¯º",
        extraLinks:[{label:"â„¹ï¸ æ±‚ç±¤ä»‹ç´¹", url:"https://matcha-jp.com/tw/948"}],
        guide:"åˆ°æ·ºè‰å¯ºåƒæ‹œï¼Œæ…¢æ…¢èµ°ä»²è¦‹ä¸–é€šæ‹è¡—æ™¯ã€‚åƒæ‹œæ™‚ä¿æŒå®‰éœã€å°Šé‡ç’°å¢ƒã€‚"
      },
      { time:"â€”", title:"æœ¨æ‘å®¶äººå½¢ç‡’ æœ¬åº—ï¼ˆé›·é–€æ—ï¼‰", type:"å°åƒ", place:"æœ¨æ‘å®¶äººå½¢ç„¼ æœ¬åº—",
        guide:"äººå½¢ç‡’å¤–çš®é¦™ã€å…§é¤¡ç”œï¼Œé©åˆé‚Šèµ°é‚Šåƒã€‚"
      },
      { time:"â€”", title:"æ·ºè‰å‰å‚™ç³°å­ AZUMAï¼ˆé›·é–€æ—ï¼‰", type:"å°åƒ", place:"æ·ºè‰å‰å‚™ç³°å­ ã‚ã¥ã¾",
        guide:"å£æ„Ÿè»ŸQï¼Œå»ºè­°è²·ä¸€ä»½å¤§å®¶åˆ†è‘—åƒã€‚"
      },
      { time:"â€”", title:"æ·ºè‰ä¹é‡ç‚¸é¥…é ­", type:"å°åƒ", place:"æµ…è‰ä¹é‡",
        guide:"ç†±ç†±åƒå¾ˆé¦™ï¼Œå‰›å‡ºçˆæœƒç‡™ï¼Œå…ˆå°å£è©¦æº«åº¦ã€‚"
      },
      { time:"â€”", title:"æ·ºè‰ç‚¸è‚‰é¤…", type:"å°åƒ", place:"Asakusa Menchi",
        guide:"é¦™æ°£å¾ˆè¶³ï¼Œå»ºè­°åˆ†é£Ÿï¼Œæ‰ä¸æœƒå¤ªé£½å½±éŸ¿åˆé¤ã€‚"
      },
      { time:"â€”", title:"å£½ã€…å–œåœ’ æŠ¹èŒ¶å†°æ·‡æ·‹ï¼ˆè¼ƒé ï¼‰", type:"ç”œé»", place:"å£½ã€…å–œåœ’ æ·ºè‰æœ¬åº—",
        guide:"æŠ¹èŒ¶å‘³å¾ˆæ¿ƒï¼Œæ™‚é–“å……è£•å†å»ï¼›è‹¥è¶•æ™‚é–“å¯æ”¹åƒè»Šç«™é™„è¿‘å¸ƒä¸ã€‚"
      },
      { time:"â€”", title:"æ·ºè‰çµ²ç¶¢å¸ƒä¸ï¼ˆé›¢è»Šç«™è¿‘ï¼‰", type:"ç”œé»", place:"æµ…è‰ã‚·ãƒ«ã‚¯ãƒ—ãƒªãƒ³",
        guide:"å£æ„Ÿç´°ç·»ã€æ–¹ä¾¿å¤–å¸¶ï¼Œé©åˆå¿«é€Ÿæ”¶å°¾æ·ºè‰è¡Œç¨‹ã€‚"
      },
      { time:"12:00", title:"åˆé¤ï¼šèŸ¹é“æ¨‚ ä¸Šé‡åº—", type:"é¤é£²", place:"ã‹ã«é“æ¥½ ä¸Šé‡åº—",
        guide:"æ…¢æ…¢äº«å—èŸ¹æ–™ç†çš„é®®ç”œï¼›å¤šäººç”¨é¤å…ˆç¢ºèªåˆ†é£Ÿå®‰æ’ï¼Œç¯€å¥æœƒæ›´é †ã€‚"
      },
      { time:"â€”", title:"ç§‹è‘‰åŸï½œé›»å™¨è¡—ï¼†æ‰­è›‹", type:"é€›è¡—", place:"ç§‹è‘‰åŸ é›»æ°—è¡—",
        guide:"æƒ³è²·è¡Œå‹•é›»æºå¯ç•™æ„æ—¥æœ¬å“ç‰Œï¼ˆå¦‚ ELECOMï¼‰ã€‚å»ºè­°å…ˆçœ‹éœ€æ±‚æ¸…å–®å†ä¸‹æ‰‹ã€‚"
      },
      { time:"14:30", title:"å¥³åƒ•å’–å•¡ï¼šã‚ã„ã©ã‚Šãƒ¼ã¿ã‚“ï¼ˆç§‹è‘‰åŸæœ¬åº—ï¼‰", type:"é«”é©—", place:"ã‚ã„ã©ã‚Šãƒ¼ã¿ã‚“ ç§‹è‘‰åŸ æœ¬åº—",
        detail:"å¯èƒ½ç¾å ´æ’éšŠåŠå°æ™‚å…§",
        guide:"ä¾åº—å®¶æµç¨‹äº’å‹•ï¼Œæ‹ç…§é€šå¸¸æœ‰è¦ç¯„ï¼Œè½åº—å“¡æŒ‡å¼•æœ€å®‰å…¨ã€‚"
      },
      { time:"â€”", title:"MANDARAKE COMPLEXï¼ˆäºŒæ‰‹å‹•æ¼«ï¼‰", type:"é€›è¡—", place:"MANDARAKE COMPLEX",
        guide:"äºŒæ‰‹å‹•æ¼«å•†å“å¯¶åº«ï¼Œæƒ³æŒ–å¯¶å¯ä»¥å¤šç¿»ç¿»ã€‚"
      },
      { time:"â€”", title:"å£½å±‹ Kotobukiyaï¼ˆç§‹è‘‰åŸï¼‰", type:"é€›è¡—", place:"ã‚³ãƒˆãƒ–ã‚­ãƒ¤ ç§‹è‘‰åŸé¤¨",
        guide:"å•†å“è¼ƒæ–°ï¼Œé©åˆçœ‹æ¨¡å‹èˆ‡å‘¨é‚Šï¼›å¯å…ˆæŸ¥æ¨“å±¤ç¯€çœæ™‚é–“ã€‚"
      },
      { time:"â€”", title:"CHABARA æ—¥æœ¬ç‰©ç”¢é¤¨ï¼ˆä¼´æ‰‹ç¦®ï¼‰", type:"ä¼´æ‰‹ç¦®", place:"CHABARA AKI-OKA MARCHE",
        guide:"åŒ¯é›†å„åœ°é£Ÿå“ã€èª¿å‘³æ–™èˆ‡ä¼´æ‰‹ç¦®ï¼Œä¸€æ¬¡è£œé½Šå¾ˆæ–¹ä¾¿ã€‚"
      },
      { time:"â€”", title:"æ±äº¬éµå¡”ï½œæ‹ç…§é»ï¼ˆèµ¤ç¾½æ©‹/èŠå…¬åœ’/å··å¼„ï¼‰", type:"æ‹ç…§", place:"æ±äº¬éµå¡”",
        guide:"ä¾äººæ½®å½ˆæ€§æŒ‘æ‹ç…§é»ï¼ŒåŸå‰‡æ˜¯å®‰å…¨ç¬¬ä¸€ï¼Œæ‰¾ä¸æ“‹è·¯çš„ä½ç½®åœç•™ã€‚"
      }
    ]
  },
  {
    key:"2026-01-12",
    label:"1/12ï¼ˆä¸€ï¼‰æ˜æ²»ç¥å®®ãƒ»åŸå®¿ãƒ»æƒ æ¯”å£½ãƒ»æ¾€è°·",
    dateText:"2026/1/12ï¼ˆä¸€ï¼‰",
    heroKind:"harajuku",
    dayIntro:"æ•£æ­¥ï¼‹é€›è¡—æ—¥ï¼šæ˜æ²»ç¥å®®ã€åŸå®¿ç«¹ä¸‹é€šã€æƒ æ¯”å£½èŠ±åœ’èˆ‡è§€æ™¯å°ï¼Œæœ€å¾Œåˆ°æ¾€è°·ä¸€è·¯é€›åˆ°æ™šé¤ã€‚",
    items:[
      { time:"08:30", title:"æ—©é¤ï¼šè—ç“¶å’–å•¡ï¼ˆæ–°å®¿ï¼‰", type:"é¤é£²", place:"Blue Bottle Coffee Shinjuku",
        guide:"å…ˆè£œé«”åŠ›ã€‚ä»Šå¤©èµ°è·¯å¤šï¼Œå»ºè­°é»ä¸»é£Ÿï¼‹å’–å•¡ã€‚"
      },
      { time:"09:00â€“11:00", title:"æ˜æ²»ç¥å®®", type:"æ™¯é»", place:"æ˜æ²»ç¥å®®",
        guide:"èµ°é€²åƒé“å…ˆæ”¾æ…¢æ­¥èª¿ï¼Œæ„Ÿå—æ±äº¬ç¶ æ´²çš„éœè¬ï¼›åƒæ‹œæ™‚ä¿æŒå®‰éœèˆ‡å°Šé‡ã€‚"
      },
      { time:"â€”", title:"åŸå®¿ï¼šCOLUMBIA TOKYO FLAGSHIP", type:"é€›è¡—", place:"COLUMBIA TOKYO FLAGSHIP",
        guide:"å¯è©¦ç©¿æ©Ÿèƒ½æœå°ºå¯¸ï¼›è‹¥çŒ¶è±«å…ˆè¨˜å‹è™Ÿæ™šé»å†æ±ºå®šã€‚"
      },
      { time:"â€”", title:"ç«¹ä¸‹é€šé€›è¡—", type:"é€›è¡—", place:"ç«¹ä¸‹é€šã‚Š",
        guide:"äººæ½®å¯†é›†ï¼Œèµ°è·¯æ…¢ä¸€é»ã€æ³¨æ„é›†åˆé»ã€‚"
      },
      { time:"â€”", title:"Marion å¯éº—é¤…", type:"ç”œé»", place:"Marion Crepes Takeshita Street",
        detail:"Â¥500â€“Â¥700",
        guide:"æ‹¿åˆ°å¾Œå…ˆæ‰¾ä¸æ“‹è·¯çš„ä½ç½®å†åƒã€å†æ‹ç…§æ›´å®‰å…¨ã€‚"
      },
      { time:"â€”", title:"Lukeâ€™s Lobster é¾è¦å ¡", type:"é¤é£²", place:"Luke's Lobster Harajuku",
        detail:"Â¥2,000â€“3,000",
        guide:"ä»½é‡ç´®å¯¦ï¼Œå»ºè­°åˆ†é£Ÿæˆ–æ­é…é£²æ–™ã€‚"
      },
      { time:"13:30", title:"æƒ æ¯”å£½èŠ±åœ’ï¼ˆåˆé¤ï¼‹æ•£æ­¥ï¼‰", type:"é¤é£²", place:"æƒ æ¯”å£½èŠ±åœ’",
        guide:"åœ’å€é¤å»³é¸æ“‡å¤šï¼Œåƒå®Œå¯ä»¥ç¨å¾®æ•£æ­¥å†ä¸Šè§€æ™¯å°ã€‚"
      },
      { time:"15:00â€“15:20", title:"Sky Lounge 38F è§€æ™¯å°", type:"æ™¯é»", place:"æµæ¯”å¯¿ã‚¬ãƒ¼ãƒ‡ãƒ³ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ãƒ¯ãƒ¼ å±•æœ›",
        guide:"æ‹çª—æ™¯å¯æ‰¾è§’è½æ¸›å°‘åå…‰ï¼›å¤•é™½æ™‚æ®µæ›´ç¾ã€‚"
      },
      { time:"15:40â€“21:00", title:"æ¾€è°·ï¼šå…«å…¬/åå­—è·¯å£/Loft/ä»»å¤©å ‚/UNIQLOç­‰", type:"é€›è¡—/æ™¯é»", place:"æ¾€è°·ç«™",
        guide:"æ¾€è°·ç©æ³•å°±æ˜¯ä¸€è·¯èµ°ä¸€è·¯é€›ï¼šå…ˆå…«å…¬ã€åå­—è·¯å£ï¼Œå†ä¾å–œå¥½é€›ç™¾è²¨èˆ‡æ——è‰¦åº—ï¼›æ¯é€›ä¸€æ®µå°±å›é›†åˆé»ç¢ºèªäººæ•¸ã€‚"
      },
      { time:"å‚™æ¡ˆ", title:"æ™šé¤å€™é¸ï¼šãƒ‹ã‚¤ãƒã‚ª æ¸‹è°·åº—ï¼ˆç…é¤ƒï¼‰", type:"é¤é£²", place:"ãƒ‹ã‚¤ãƒã‚ª æ¸‹è°·åº—",
        guide:"æƒ³å¿«é€Ÿè§£æ±ºæ™šé¤å¯é¸é€™å®¶ï¼Œé€Ÿåº¦å¿«ã€ä»½é‡å‰›å¥½ã€‚"
      }
    ]
  },
  {
    key:"2026-01-13",
    label:"1/13ï¼ˆäºŒï¼‰å¯Œå£«å±±ä¸€æ—¥éŠ",
    dateText:"2026/1/13ï¼ˆäºŒï¼‰",
    heroKind:"fuji",
    dayIntro:"æ—©ä¸Šæ–°å®¿é›†åˆå‡ºç™¼ï¼šæ–°å€‰å±±æ·ºé–“å…¬åœ’ â†’ æ²³å£æ¹–ï¼ˆå«é¤ºé£¥åˆé¤ï¼‰â†’ å¤§çŸ³å…¬åœ’ â†’ è¥¿æ¹–ç™‚ç™’ä¹‹é„‰ æ ¹å ´ï¼Œå‚æ™šå›æ–°å®¿è§£æ•£ã€‚",
    items:[
      { time:"08:20", title:"é›†åˆï¼šæ–°å®¿ i-Land Tower LOVE æ¨™èªŒå‰", type:"é›†åˆé»", place:"Shinjuku i-Land Tower LOVE",
        guide:"åˆ°é”å¾Œå…ˆå‘é ˜éšŠå ±åˆ°ã€ç¢ºèªäººæ•¸ã€‚å‘¨é‚Šäººå¤šï¼Œè«‹ç«™åœ¨æŒ‡å®šä½ç½®ç­‰ã€‚"
      },
      { time:"10:30", title:"æ–°å€‰å±±æ·ºé–“å…¬åœ’ï¼ˆåœç•™70åˆ†ï¼‰", type:"æ™¯é»", place:"æ–°å€‰å±±æµ…é–“å…¬åœ’",
        guide:"å…ˆè¡è§€æ™¯é»æ‹ç¶“å…¸æ§‹åœ–ï¼Œå†è£œæ‹é³¥å±…èˆ‡å‘¨é‚Šï¼›ä¸Šä¸‹éšæ¢¯æ³¨æ„è…³æ­¥ã€‚"
      },
      { time:"12:00", title:"æ²³å£æ¹– Craft Parkï¼ˆåœç•™120åˆ†ï¼‰", type:"æ™¯é»", place:"Kawaguchiko Craft Park",
        detail:"ç”¨é¤å¾Œå¯æ–¼æ¹–ç•”æ•£ç­–ï¼Œé çœºå¯Œå£«å±±",
        guide:"æ¹–ç•”æ•£æ­¥è¦–é‡å¾ˆæ£’ï¼Œé¢¨å¤§æ™‚æ³¨æ„ä¿æš–èˆ‡å¸½å­ã€‚"
      },
      { time:"åˆé¤", title:"å±±æ¢¨åç‰©ï¼šé¤ºé£¥éºµ", type:"é¤é£²", place:"ã»ã†ã¨ã† æ²³å£æ¹–",
        guide:"éºµæ¢åšå¯¦ã€æ¹¯é ­æ¿ƒéƒï¼Œå†¬å¤©åƒå¾ˆé©åˆã€‚"
      },
      { time:"14:10", title:"å¤§çŸ³å…¬åœ’ï¼ˆåœç•™30åˆ†ï¼‰", type:"æ™¯é»", place:"å¤§çŸ³å…¬åœ’ æ²³å£æ¹–",
        guide:"åœç•™çŸ­ï¼Œå…ˆæ‰¾è§’åº¦å¿«é€Ÿå®Œæˆï¼›å¯ç”¨å»£è§’æŠŠæ¹–ã€å±±ã€å¤©ç©ºä¸€èµ·æ”¶é€²ä¾†ã€‚"
      },
      { time:"15:00", title:"è¥¿æ¹–ç™‚ç™’ä¹‹é„‰ æ ¹å ´ï¼ˆåœç•™50åˆ†ï¼‰", type:"æ™¯é»", place:"è¥¿æ¹–ã„ã‚„ã—ã®é‡Œæ ¹å ´",
        guide:"åˆæŒæ‘é¢¨æ ¼èšè½å¾ˆç™‚ç™’ï¼›æ‹ç…§æ³¨æ„ä¸è¦æ‰“æ“¾ä½æˆ¶ã€‚"
      },
      { time:"18:00", title:"å›åˆ°æ–°å®¿è§£æ•£", type:"è¿”å›", place:"æ–°å®¿é§…",
        guide:"ä¸‹è»Šå¾Œå†ç¢ºèªéš¨èº«ç‰©å“èˆ‡æˆ°åˆ©å“ï¼›ç…§ç‰‡å¯å…ˆå‚™ä»½ã€‚"
      },
      { time:"æ™šé¤", title:"æ—¥é«˜å±‹ï¼ˆæ–°å®¿ï¼‰ä¹¾æ‹‰éºµï¼‹é¤ƒå­ï¼‹ç‡™é’èœ", type:"é¤é£²", place:"æ—¥é«˜å±‹ æ–°å®¿",
        guide:"æƒ³å¿«é€Ÿåƒé£½å°±é¸æ—¥é«˜å±‹ï¼Œåƒå®Œæ—©é»ä¼‘æ¯ã€‚"
      }
    ]
  },
  {
    key:"2026-01-14",
    label:"1/14ï¼ˆä¸‰ï¼‰æ–°å®¿æ¡è²·ãƒ»è¿”å°",
    dateText:"2026/1/14ï¼ˆä¸‰ï¼‰",
    heroKind:"return",
    dayIntro:"æœ€å¾Œä¸€å¤©ï¼šæ—©é¤â†’ä¸–ç•Œå ‚é€›æ–‡å…·â†’æ–°å®¿å‰å¾€æˆç”°â†’å…ç¨…è£œè²¨â†’è¿”å°ã€‚",
    items:[
      { time:"09:30", title:"ä¸–ç•Œå ‚ æ–°å®¿æœ¬åº—ï¼ˆæ–‡å…·ï¼‰", type:"é€›è¡—", place:"ä¸–ç•Œå ‚ æ–°å®¿æœ¬åº—",
        guide:"æ–‡å…·å¤©å ‚ï¼å…ˆè¨­å®šè³¼è²·ä¸Šé™ï¼Œé¿å…è²·åˆ°å¤±æ§ã€‚"
      },
      { time:"æœ€æ™š12:38", title:"æ–°å®¿å‡ºç™¼ â†’ æˆç”°æ©Ÿå ´ï¼ˆé è¨ˆ14:00åˆ°ï¼‰", type:"äº¤é€š", place:"æˆç”°ç©ºæ¸¯",
        guide:"é ç•™é€€ç¨…ã€æ‰˜é‹èˆ‡å®‰æª¢æ™‚é–“ï¼Œåˆ¥æ‹–åˆ°æœ€å¾Œæ‰æ’éšŠã€‚"
      },
      { time:"â€”", title:"æˆç”°æ©Ÿå ´ï¼šå…ç¨…åº—æœ€å¾Œæ¡è²·", type:"æ¡è²·", place:"æˆç”°ç©ºæ¸¯ å…ç¨åº—",
        guide:"å…ˆç¢ºèªç™»æ©Ÿé–€èˆ‡ç™»æ©Ÿæ™‚é–“ï¼Œå†å»å…ç¨…åº—æ¡è²·ã€‚"
      },
      { time:"æ—¥æœ¬16:35", title:"èµ·é£›", type:"èˆªç­", place:"æˆç”°ç©ºæ¸¯",
        guide:"ç™»æ©Ÿå‰æŠŠè­·ç…§ã€è€³æ©Ÿèˆ‡å¤–å¥—æ”¾å®¹æ˜“æ‹¿çš„ä½ç½®ã€‚"
      },
      { time:"å°ç£20:00", title:"æŠµé”æ¡ƒåœ’æ©Ÿå ´", type:"æŠµé”", place:"æ¡ƒåœ’åœ‹éš›æ©Ÿå ´",
        guide:"é ˜å–æ‰˜é‹è¡Œæå¾Œå†é›¢é–‹ï¼Œæ—…ç¨‹åœ“æ»¿çµæŸï¼"
      }
    ]
  }
];

/** ========= ç‹€æ…‹ ========= */
let activeKey = itinerary[0].key;
let sortMode = "original";
let slotFilter = "all";
let navEnabled = false;
let navPointer = { dayKey: activeKey, itemIdx: 0 };

/** ========= ç¯©é¸èˆ‡æ’åº ========= */
function matchesKeyword(day, it, keyword){
  if(!keyword) return true;
  const k = keyword.toLowerCase();
  return (
    (it.title||"").toLowerCase().includes(k) ||
    (it.type||"").toLowerCase().includes(k) ||
    (it.detail||"").toLowerCase().includes(k) ||
    (it.place||"").toLowerCase().includes(k) ||
    (day.label||"").toLowerCase().includes(k) ||
    (day.dayIntro||"").toLowerCase().includes(k)
  );
}
function passesSlot(it){
  if(slotFilter === "all") return true;
  return timeSlot(it.time) === slotFilter;
}
function getVisibleIndices(dayKey){
  const day = itinerary.find(d=>d.key===dayKey);
  if(!day) return [];
  const keyword = ($searchBox.value||"").trim();
  let arr = day.items
    .map((it, idx)=>({it, idx}))
    .filter(x=> matchesKeyword(day, x.it, keyword))
    .filter(x=> passesSlot(x.it));

  if(sortMode === "time"){
    arr.sort((a,b)=>{
      const ta = parseTimeToMinutes(a.it.time);
      const tb = parseTimeToMinutes(b.it.time);
      const va = (ta==null? 99999 : ta);
      const vb = (tb==null? 99999 : tb);
      if(va !== vb) return va - vb;
      return a.idx - b.idx;
    });
  }
  return arr.map(x=>x.idx);
}

/** ========= æ¸²æŸ“ ========= */
function slotFilterLabel(v){
  if(v==="morning") return "ä¸Šåˆ";
  if(v==="afternoon") return "ä¸‹åˆ";
  if(v==="evening") return "æ™šä¸Š";
  if(v==="unknown") return "ç„¡æ˜ç¢ºæ™‚é–“";
  return "å…¨éƒ¨æ™‚æ®µ";
}

function render(){
  sortMode = $sortSel.value;
  slotFilter = $slotSel.value;
  const keyword = ($searchBox.value||"").trim();

  $tabs.innerHTML = '';
  $panels.innerHTML = '';

  itinerary.forEach((day)=>{
    const tab = document.createElement('div');
    tab.className = 'tab' + (day.key===activeKey ? ' active':'');
    tab.textContent = day.label;
    tab.dataset.key = day.key;
    tab.onclick = ()=>{
      if(navEnabled){ toast("å°èˆªæ¨¡å¼ä¸‹è«‹ç”¨ã€Œä¸Šä¸€å€‹/ä¸‹ä¸€å€‹ã€å°èˆª"); return; }
      activate(day.key, {keepNavPointer:true});
    };
    $tabs.appendChild(tab);

    const panel = document.createElement('div');
    panel.className = 'panel' + (day.key===activeKey ? ' active':'');
    panel.id = 'panel-'+day.key;

    const todayBadge = isTodayKey(day.key) ? `<span class="badge">â­ ä»Šæ—¥</span>` : '';
    const visibleIdx = getVisibleIndices(day.key);

    const itemsHTML = visibleIdx.map((idx)=>{
      const it = day.items[idx];
      const icon = typeIcon(it.type);
      const mapLink = mapsSearchLink(it.place || it.title);
      const extraLinks = (it.extraLinks||[])
        .map(x=> `<a class="linkbtn" href="${x.url}" target="_blank" rel="noopener noreferrer">${escapeHTML(x.label)}</a>`)
        .join('');

      return `
        <details class="item" id="item-${day.key}-${idx}" data-day="${day.key}" data-idx="${idx}">
          <summary>
            <div class="left">
              <div class="time">${escapeHTML(it.time || 'â€”')}</div>
              <div style="min-width:0">
                <div class="title">${icon} ${maybeHighlight(it.title, keyword)}</div>
                <div class="meta">${maybeHighlight(it.type || '', keyword)}${it.place ? ` ãƒ» ${maybeHighlight(it.place, keyword)}` : ''}</div>
              </div>
            </div>
            <div class="right">
              <a class="linkbtn mini" href="${mapLink}" target="_blank" rel="noopener noreferrer">ğŸ—ºï¸ åœ°åœ–</a>
            </div>
          </summary>

          <div class="content">
            ${it.detail ? `
              <div class="block">
                <h3>è©³ç´°</h3>
                <p>${maybeHighlight(it.detail, keyword).replace(/\n/g,'<br>')}</p>
              </div>
            `:''}

            <div class="block">
              <h3>å°è¦½é‡é»</h3>
              <p>${maybeHighlight(it.guide || 'ï¼ˆæ­¤é»å°šæœªæä¾›å°è¦½é‡é»ï¼‰', keyword)}</p>
            </div>

            <div class="links">
              ${extraLinks}
            </div>
          </div>
        </details>
      `;
    }).join('');

    panel.innerHTML = `
      <div class="day-card">
        <div class="day-title">
          <div>
            <div class="row" style="margin-bottom:6px">
              <h2 style="margin:0">${escapeHTML(day.dateText)}ï½œ${escapeHTML(day.label)}</h2>
              ${todayBadge}
            </div>
            <div class="note">${maybeHighlight(day.dayIntro || '', keyword)}</div>
            <div class="hint" style="margin-top:8px">
              ç›®å‰ï¼š${sortMode==="time" ? "ä¾æ™‚é–“æ’åº" : "åŸé †åº"} ï½œ æ™‚æ®µï¼š${slotFilterLabel(slotFilter)} ï½œ æœå°‹ï¼š${keyword?escapeHTML(keyword):"ï¼ˆç„¡ï¼‰"}
            </div>
          </div>

          <div class="row" style="justify-content:flex-end">
            <a class="btn mini" href="${mapsSearchLink(day.label)}" target="_blank" rel="noopener noreferrer">ğŸ—ºï¸ æ‰“é–‹ä»Šæ—¥ä¸»è¦å€åŸŸ</a>
          </div>
        </div>

        <div class="hero">
          ${heroSVG(day.heroKind || "arrival")}
          <div class="cap">ğŸ–¼ï¸ å…§å»ºç¤ºæ„åœ–ï¼ˆé›¢ç·šå¯é¡¯ç¤ºï¼‰ï½œæç¤ºï¼šæ¯å€‹è¡Œç¨‹é»éƒ½å¯æŒ‰ã€Œåœ°åœ–ã€å¿«é€Ÿå®šä½</div>
        </div>

        ${visibleIdx.length===0 && (keyword || slotFilter!=="all") ? `
          <div class="hint">æ²’æœ‰ç¬¦åˆç›®å‰ã€Œæœå°‹/æ™‚æ®µæ¿¾é¡ã€çš„è¡Œç¨‹é»ã€‚</div>
        `:''}

        <div class="items">${itemsHTML}</div>
      </div>
    `;

    $panels.appendChild(panel);
  });

  if(navEnabled){
    ensureNavPointerValid(false);
    highlightNavCurrent();
    updateNavInfo();
  }
}

function activate(key, opts={}){
  activeKey = key;
  document.querySelectorAll('.tab').forEach(t=> t.classList.toggle('active', t.dataset.key===key));
  document.querySelectorAll('.panel').forEach(p=> p.classList.toggle('active', p.id==='panel-'+key));

  if(!opts.keepNavPointer && navEnabled){
    navPointer.dayKey = key;
    navPointer.itemIdx = (getVisibleIndices(key)[0] ?? 0);
  }
  window.scrollTo({top:0, behavior:'smooth'});
}

/** ========= ä»Šæ—¥è¡Œç¨‹ ========= */
function parseKeyToDate(key){
  const [y,m,d] = key.split('-').map(n=>parseInt(n,10));
  return new Date(y, m-1, d, 0,0,0,0);
}
function sameYMD(a,b){
  return a.getFullYear()===b.getFullYear() && a.getMonth()===b.getMonth() && a.getDate()===b.getDate();
}
function isTodayKey(key){
  const today = new Date();
  const dk = parseKeyToDate(key);
  return sameYMD(today, dk);
}
function gotoTodayOrNext(){
  const today = new Date();
  const exact = itinerary.find(d=> sameYMD(parseKeyToDate(d.key), today));
  if(exact){
    activeKey = exact.key;
    render();
    activate(activeKey, {keepNavPointer:false});
    toast("å·²è·³åˆ°ï¼šä»Šæ—¥è¡Œç¨‹ âœ…");
    return;
  }
  const todayMid = new Date(today.getFullYear(), today.getMonth(), today.getDate()).getTime();
  const future = itinerary
    .map(d=>({key:d.key, dt:parseKeyToDate(d.key)}))
    .filter(x=> x.dt.getTime() >= todayMid)
    .sort((a,b)=>a.dt-b.dt)[0];

  if(future){
    activeKey = future.key;
    render();
    activate(activeKey, {keepNavPointer:false});
    toast("ä»Šå¤©ä¸åœ¨è¡Œç¨‹æœŸé–“ï¼Œå·²è·³åˆ°æœ€è¿‘ä¸€å¤©");
  }else{
    toast("æ‰¾ä¸åˆ°å¯å°æ‡‰çš„ä»Šæ—¥/ä¸‹ä¸€æ—¥");
  }
}

/** ========= å°èˆªæ¨¡å¼ ========= */
const $navBar = document.getElementById('navBar');
const $navInfo = document.getElementById('navInfo');
const $btnNavToggle = document.getElementById('btnNavToggle');
const $btnPrev = document.getElementById('btnPrev');
const $btnNext = document.getElementById('btnNext');
const $btnExitNav = document.getElementById('btnExitNav');

function setNavEnabled(on){
  navEnabled = on;
  document.body.classList.toggle('nav-mode', on);
  $navBar.classList.toggle('hidden', !on);
  $btnNavToggle.textContent = on ? "ğŸ§­ å°èˆªï¼šé–‹" : "ğŸ§­ å°èˆªï¼šé—œ";

  if(on){
    ensureNavPointerValid(true);
    jumpToNavCurrent(true);
    toast("å°èˆªæ¨¡å¼å·²é–‹å•Ÿ");
  }else{
    clearNavHighlight();
    toast("å°èˆªæ¨¡å¼å·²é—œé–‰");
  }
}

function ensureNavPointerValid(forceReset=false){
  const vis = getVisibleIndices(navPointer.dayKey);
  if(forceReset || vis.length===0 || !vis.includes(navPointer.itemIdx)){
    let dayIndex = itinerary.findIndex(d=>d.key===navPointer.dayKey);
    if(dayIndex < 0) dayIndex = 0;

    if(vis.length>0){
      navPointer.itemIdx = vis[0];
      return;
    }
    for(let i=dayIndex;i<itinerary.length;i++){
      const k = itinerary[i].key;
      const v = getVisibleIndices(k);
      if(v.length){
        navPointer.dayKey = k;
        navPointer.itemIdx = v[0];
        return;
      }
    }
    for(let i=dayIndex;i>=0;i--){
      const k = itinerary[i].key;
      const v = getVisibleIndices(k);
      if(v.length){
        navPointer.dayKey = k;
        navPointer.itemIdx = v[0];
        return;
      }
    }
    navPointer.dayKey = activeKey;
    navPointer.itemIdx = 0;
  }
}

function clearNavHighlight(){
  document.querySelectorAll('details.item').forEach(el=> el.classList.remove('nav-current'));
}
function highlightNavCurrent(){
  clearNavHighlight();
  const el = document.getElementById(`item-${navPointer.dayKey}-${navPointer.itemIdx}`);
  if(el) el.classList.add('nav-current');
}
function navInfoText(){
  const day = itinerary.find(d=>d.key===navPointer.dayKey);
  const it = day?.items?.[navPointer.itemIdx];
  if(!day || !it) return "å°èˆªä¸­â€¦";
  const vis = getVisibleIndices(navPointer.dayKey);
  const pos = vis.indexOf(navPointer.itemIdx);
  const count = vis.length;
  return `ç›®å‰ï¼š${day.dateText}ï½œ${it.time || "â€”"}ï½œ${it.title}ï¼ˆ${pos>=0?pos+1:"?"}/${count}ï¼‰`;
}
function updateNavInfo(){
  $navInfo.textContent = navInfoText();
}

function collapseAllDetails(){
  document.querySelectorAll('details.item').forEach(d => d.open = false);
}
function jumpToNavCurrent(openDetail=false){
  activeKey = navPointer.dayKey;
  render();
  activate(activeKey, {keepNavPointer:true});

  const el = document.getElementById(`item-${navPointer.dayKey}-${navPointer.itemIdx}`);
  if(el){
    collapseAllDetails();
    if(openDetail) el.open = true;
    highlightNavCurrent();
    setTimeout(()=>{
      el.scrollIntoView({behavior:'smooth', block:'start'});
      updateNavInfo();
    }, 60);
  }else{
    updateNavInfo();
  }
}
function moveNav(step){
  ensureNavPointerValid(false);

  const dayIdx = itinerary.findIndex(d=>d.key===navPointer.dayKey);
  const vis = getVisibleIndices(navPointer.dayKey);
  if(!vis.length){
    ensureNavPointerValid(true);
    jumpToNavCurrent(true);
    return;
  }
  let pos = vis.indexOf(navPointer.itemIdx);
  if(pos < 0) pos = 0;

  pos += step;

  if(pos < 0){
    for(let i=dayIdx-1;i>=0;i--){
      const k = itinerary[i].key;
      const v = getVisibleIndices(k);
      if(v.length){
        navPointer.dayKey = k;
        navPointer.itemIdx = v[v.length-1];
        jumpToNavCurrent(true);
        return;
      }
    }
    toast("å·²æ˜¯æœ€å‰ä¸€å€‹è¡Œç¨‹é»");
    jumpToNavCurrent(true);
    return;
  }

  if(pos >= vis.length){
    for(let i=dayIdx+1;i<itinerary.length;i++){
      const k = itinerary[i].key;
      const v = getVisibleIndices(k);
      if(v.length){
        navPointer.dayKey = k;
        navPointer.itemIdx = v[0];
        jumpToNavCurrent(true);
        return;
      }
    }
    toast("å·²æ˜¯æœ€å¾Œä¸€å€‹è¡Œç¨‹é»");
    jumpToNavCurrent(true);
    return;
  }

  navPointer.itemIdx = vis[pos];
  jumpToNavCurrent(true);
}

/** ========= ä¸»é¡Œ / å­—ç´š ========= */
const $toggleTheme = document.getElementById('toggleTheme');
const $fontMinus = document.getElementById('fontMinus');
const $fontPlus = document.getElementById('fontPlus');

function setTheme(mode){
  document.documentElement.setAttribute('data-theme', mode);
  localStorage.setItem('tokyo_theme', mode);
  $toggleTheme.textContent = (mode==='dark') ? 'â˜€ï¸ æ—¥é–“æ¨¡å¼' : 'ğŸŒ™ å¤œé–“æ¨¡å¼';
}
function setFont(px){
  px = Math.max(14, Math.min(20, px));
  document.documentElement.style.setProperty('--base', px+'px');
  localStorage.setItem('tokyo_font', String(px));
  toast(`å­—ç´šï¼š${px}px`);
}
$toggleTheme.onclick = ()=>{
  const cur = document.documentElement.getAttribute('data-theme') || 'light';
  setTheme(cur==='dark' ? 'light' : 'dark');
};
$fontMinus.onclick = ()=>{
  const cur = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--base')) || 16;
  setFont(cur-1);
};
$fontPlus.onclick = ()=>{
  const cur = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--base')) || 16;
  setFont(cur+1);
};

/** ========= æœå°‹ / æ¸…é™¤ / æ¿¾é¡è®Šæ›´ ========= */
document.getElementById('btnClear').onclick = ()=>{
  $searchBox.value = '';
  render();
  activate(activeKey, {keepNavPointer:true});
  if(navEnabled){
    ensureNavPointerValid(false); jumpToNavCurrent(true); }
};
$searchBox.addEventListener('input', ()=>{
  render();
  activate(activeKey, {keepNavPointer:true});
  if(navEnabled){
    ensureNavPointerValid(false); jumpToNavCurrent(false); }
});
$sortSel.addEventListener('change', ()=>{
  render();
  activate(activeKey, {keepNavPointer:true});
  if(navEnabled){
    ensureNavPointerValid(false); jumpToNavCurrent(true); }
});
$slotSel.addEventListener('change', ()=>{
  render();
  activate(activeKey, {keepNavPointer:true});
  if(navEnabled){
    ensureNavPointerValid(false); jumpToNavCurrent(true); }
});

/** ========= ç¶å®šï¼šä»Šæ—¥/å°èˆª ========= */
document.getElementById('btnToday').onclick = ()=> {
  gotoTodayOrNext();
  if(navEnabled){
    navPointer.dayKey = activeKey;
    ensureNavPointerValid(true);
    jumpToNavCurrent(true);
  }
};

$btnNavToggle.onclick = ()=> setNavEnabled(!navEnabled);
$btnExitNav.onclick = ()=> setNavEnabled(false);
$btnPrev.onclick = ()=> moveNav(-1);
$btnNext.onclick = ()=> moveNav(+1);

/** ========= åˆå§‹åŒ– ========= */
setTheme(localStorage.getItem('tokyo_theme') || 'light');
setFont(parseInt(localStorage.getItem('tokyo_font') || "16", 10));
render();
activate(activeKey, {keepNavPointer:true});
</script>
</body>
</html>
